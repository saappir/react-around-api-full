{"version":3,"sources":["images/logo/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/api.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/HomepageForm.js","components/Login.js","components/Register.js","images/icons/fail.svg","images/icons/confirm.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","email","linkPath","linkTitle","onLogout","className","src","logo","alt","to","onClick","CurrentUserContext","React","createContext","Card","onCardClick","card","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","link","name","length","Main","onEditAvatarClick","onEditProfileClick","onAddPlaceClick","handleCardLike","handleCardDelete","cards","avatar","about","map","Footer","api","baseUrl","_customFetch","fetch","then","res","ok","json","Promise","reject","statusText","this","_baseUrl","data","method","body","JSON","stringify","cardId","PopupWithForm","isOpen","title","onClose","children","submitText","onSubmit","ImagePopup","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","evt","preventDefault","id","placeholder","minLength","maxLength","required","value","onChange","e","target","EditAvatarPopup","onUpdateAvatar","imageInput","useRef","current","ref","AddPlacePopup","onAddPlace","placeName","setPlaceName","placeImage","setPlaceImage","ProtectedRoute","loggedIn","HomepageForm","linkText","onEmailChange","onPasswordChange","password","withRouter","onLogin","setEmail","setPassword","onRegister","InfoTooltip","message","successIcon","failIcon","BASE_URL","resHandler","App","selectedCard","setSelectedCard","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setUserState","setCardsArray","setLoggedIn","setMessage","history","useHistory","getUserinfo","catch","error","console","getInitialCards","tokenCheck","token","localStorage","getItem","headers","auth","push","closeAllPopups","Provider","path","finally","setItem","exact","removeItem","changeLikeCardStatus","newCard","state","c","deleteCard","filter","updateUserInfo","setUserAvatar","createCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2c3af9a5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.4e8e0a1d.svg\";","import { React } from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../images/logo/logo.svg';\n\nfunction Header(props) {\n\n  const { email, linkPath, linkTitle, onLogout } = props\n\n  return (\n    <div className=\"header\">\n      <img\n        src={logo}\n        alt=\"around the US logo\"\n        className=\"header__logo\"\n      />\n      <div className='header__container'>\n        <p className='header__email'>{email}</p>\n        <Link className='header__link' to={linkPath} onClick={onLogout} >{linkTitle}</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n\n  const { onCardClick, card, onCardLike, onCardDelete } = props;\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (\n    `card__delete-button ${isOwn ? 'card__delete-button_state_visible' : 'card__delete-button_state_hidden'}`\n  );\n\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\n  const cardLikeButtonClassName = (\n    `card__like-button ${isLiked && 'card__like-button_state_active'}`\n  )\n\n  const handleClick = () => {\n    onCardClick(card);\n  }\n\n  const handleCardLike = () => {\n    onCardLike(card)\n  }\n\n  const handleDeleteClick = () => {\n    onCardDelete(card)\n  }\n\n  return (\n    <article className=\"card\">\n      <button\n        aria-label=\"delete\"\n        type=\"button\"\n        className={cardDeleteButtonClassName}\n        onClick={handleDeleteClick} />\n      <img\n        src={card.link}\n        alt={card.name}\n        className=\"card__image\"\n        onClick={handleClick} />\n      <div className=\"card__inner\">\n        <h2 className=\"card__title\">{card.name}</h2>\n        <div className=\"card__likes-container\">\n          <button\n            aria-label=\"like\"\n            type=\"button\"\n            className={cardLikeButtonClassName}\n            onClick={handleCardLike} />\n          <span className=\"card__likes-count\">{card.likes.length}</span>\n        </div>\n      </div>\n    </article>\n  )\n}\n\nexport default Card;\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\n\nfunction Main(props) {\n\n  const { onCardClick, onEditAvatarClick, onEditProfileClick, onAddPlaceClick, handleCardLike,\n    handleCardDelete, cards } = props;\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <div className=\"page\">\n      <section className=\"profile\">\n        <div className=\"profile__image-container\">\n          <img src={currentUser.avatar} alt={currentUser.name} className=\"profile__image\" />\n          <button className=\"profile__button profile__button_type_image\"\n            onClick={onEditAvatarClick} />\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__inner\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button aria-label=\"edit\" type=\"button\" className=\"profile__button profile__button-hover profile__button_type_edit\"\n              onClick={onEditProfileClick} />\n          </div>\n          <p className=\"profile__description\" >{currentUser.about}</p>\n        </div>\n        <button aria-label=\"add\" type=\"button\" className=\"profile__button profile__button-hover profile__button_type_add\"\n          onClick={onAddPlaceClick}\n        />\n      </section>\n      <section className=\"cards\">\n        {cards.map((card) => (\n          <Card card={card} onCardClick={onCardClick} key={card._id} onCardLike={handleCardLike} onCardDelete={handleCardDelete} />\n        ))}\n      </section>\n    </div>\n  )\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2021 Around The U.S.</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","class Api {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n  }\n\n  _customFetch = (baseUrl) =>\n    fetch(baseUrl)\n      .then(res => res.ok ? res.json() : Promise.reject(res.statusText))\n\n  getInitialCards() {\n    return this._customFetch(`${this._baseUrl}/cards`, {\n    })\n  }\n\n  getUserinfo() {\n    return this._customFetch(`${this._baseUrl}/users/me`, {\n    })\n  }\n\n  updateUserInfo(data) {\n    return this._customFetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n  }\n\n  createCard(data) {\n    return this._customFetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      body: JSON.stringify(data)\n    })\n  }\n\n  deleteCard(cardId) {\n    return this._customFetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE'\n    })\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return this._customFetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: isLiked ? 'PUT' : 'DELETE'\n    })\n  }\n\n  setUserAvatar({ avatar }) {\n    return this._customFetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      body: JSON.stringify({ avatar })\n    })\n  }\n}\n\nconst api = new Api({\n  baseUrl: \"https://api.saappir.students.nomoreparties.sbs\",\n});\n\nexport default api;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n\n  const { isOpen, name, title, onClose, children, submitText, onSubmit } = props;\n\n  return (\n    <section className={`popup popup_type_${name}, ${isOpen && 'popup_visible'}`} >\n      <div className=\"popup__container\">\n        <button\n          aria-label=\"exit\"\n          type=\"button\"\n          className=\"popup__exit-button\"\n          onClick={onClose}\n        />\n        <form className={`popup__form popup__${name}-form`} onSubmit={onSubmit}>\n          <h2 className=\"popup__title\">{title}</h2>\n          {children}\n          <button type=\"submit\" className=\"popup__submit-button\">\n            {submitText}\n          </button>\n        </form>\n      </div>\n    </section>\n  )\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\n\nfunction ImagePopup(props) {\n\n  const { isOpen, onClose, card } = props\n\n  return (\n    <div className={`popup popup_type_image ${isOpen && 'popup_visible'}`}>\n      <div className=\"popup__container\">\n        <button aria-label=\"exit\" type=\"button\" className=\"popup__exit-button popup__exit-image\" onClick={onClose} />\n        <figure className=\"popup__figure\">\n          <img className=\"popup__figure-image\" src={card.link} alt={card.name} />\n          <figcaption className=\"popup__figure-caption\">{card.name}</figcaption>\n        </figure>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup(props) {\n\n  const { isOpen, onClose, onUpdateUser } = props\n\n  const [name, setName] = React.useState('')\n  const [description, setDescription] = React.useState('')\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    setName(currentUser.name || '');\n    setDescription(currentUser.about || '');\n  }, [currentUser, isOpen]);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  function handleInputNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleInputDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  return (\n    <PopupWithForm name=\"edit\" title=\"Edit profile\" submitText=\"Save\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}>\n      <label className=\"popup__input-label\">\n        <input\n          className=\"popup__input popup__input_content_name\" type=\"text\"\n          name=\"name\" id=\"input-name\" placeholder=\"Name\"\n          minLength={2} maxLength={40} required value={name} onChange={handleInputNameChange}\n        />\n        <span className=\"popup__input-error input-name-error\"></span>\n      </label>\n      <label className=\"popup__input-label\">\n        <input\n          className=\"popup__input popup__input_content_description\" type=\"text\"\n          name=\"about\" id=\"input-description\" placeholder=\"Job\"\n          minLength={2} maxLength={200} required value={description} onChange={handleInputDescriptionChange}\n        />\n        <span className=\"popup__input-error input-description-error\" ></span>\n      </label>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n\n  const { isOpen, onClose, onUpdateAvatar } = props;\n\n  const imageInput = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: imageInput.current.value\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"image\" title=\"Update profile picture\" submitText=\"Save\" isOpen={isOpen}\n      onClose={onClose} onSubmit={handleSubmit}>\n      <label className=\"popup__input-label\">\n        <input className=\"popup__input popup__input_content_profile-image\" type=\"url\" name=\"link\" id=\"input-avatar\"\n          placeholder=\"Image link\" required\n           ref={imageInput} />\n        <span className=\"popup__input-error input-avatar-error\" />\n      </label>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n\n  const { isOpen, onClose, onAddPlace } = props;\n\n  const [placeName, setPlaceName] = React.useState('');\n  const [placeImage, setPlaceImage] = React.useState('');\n\n  function handleInputNameChange(e) {\n    setPlaceName(e.target.value);\n  };\n\n  function handleInputImageChange(e) {\n    setPlaceImage(e.target.value);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: placeName,\n      link: placeImage\n    });\n  };\n\n  React.useEffect(() => {\n    setPlaceName('');\n    setPlaceImage('');\n  }, [isOpen]);\n\n  return (\n    <PopupWithForm name=\"add\" title=\"New place\" submitText=\"Create\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}>\n      <label className=\"popup__input-label\">\n        <input className=\"popup__input popup__input_content_title\" type=\"text\" name=\"name\" id=\"input-title\"\n         value={placeName} placeholder=\"Title\" required=\"1\" maxLength=\"30\" onChange={handleInputNameChange} />\n        <span className=\"popup__input-error input-title-error\" />\n      </label>\n      <label className=\"popup__input-label\">\n        <input className=\"popup__input popup__input_content_link\" type=\"url\" name=\"link\" id=\"input-image\"\n          value={placeImage} placeholder=\"Image link\" required onChange={handleInputImageChange} />\n        <span className=\"popup__input-error input-image-error\" />\n      </label>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = (props) => {\n  const { children, loggedIn } = props\n  return (\n    <Route>\n      {\n        (() => loggedIn ? children : <Redirect to='/signin' />)\n      }\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;\n","import { React } from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction HomepageForm(props) {\n  const { title, linkText, linkPath, onSubmit, onEmailChange,\n    onPasswordChange, email, password } = props\n\n  return (\n    <section className='homepage' >\n      <form className='homepage__form' onSubmit={onSubmit}>\n        <h2 className='homepage__title'>{title}</h2>\n        <label className='homepage__input-label'>\n          < input className='homepage__input' type='email' name='email' id='email'\n            placeholder='Email' onChange={onEmailChange} value={email} required />\n        </label>\n        <label className='homepage__input-label'>\n          <input className='homepage__input' type='password' name='password' id='password'\n            placeholder='Password' onChange={onPasswordChange} value={password} required />\n        </label>\n        <button type='submit' className='homepage__submit'>{title}</button>\n      </form>\n      <Link to={linkPath} className='homepage__link'>{linkText}</Link>\n    </section>\n  )\n}\n\nexport default HomepageForm;\n","import { React, useState } from 'react'\nimport HomepageForm from \"./HomepageForm\";\nimport { withRouter } from 'react-router-dom';\n\nfunction Login(props) {\n\n  const { onLogin } = props\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value)\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value)\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onLogin({ email, password });\n  }\n\n  // React.useEffect(() => {\n  //   setEmail('');\n  //   setPassword('');\n  // }, [])\n\n  return (\n    <HomepageForm\n      title='Log in'\n      linkText='Not a member yet? Sign up here!'\n      linkPath='/signup'\n      onSubmit={handleSubmit}\n      onEmailChange={handleEmailChange}\n      onPasswordChange={handlePasswordChange}\n      email={email}\n      password={password}\n    />\n  )\n}\n\nexport default withRouter(Login);\n","import { React, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport HomepageForm from \"./HomepageForm\";\n\nfunction Register(props) {\n\n  const { onRegister } = props;\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value)\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value)\n  }\n\n  // React.useEffect(() => {\n  //   setEmail('');\n  //   setPassword('');\n  // }, [])\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onRegister({ email, password })\n  }\n\n  return (\n    <HomepageForm\n      title='Sign up'\n      linkText='Already a member? Log in here!'\n      linkPath={'signin'}\n      onSubmit={handleSubmit}\n      onEmailChange={handleEmailChange}\n      onPasswordChange={handlePasswordChange}\n      email={email}\n      password={password}\n    />\n  )\n}\n\nexport default withRouter(Register);\n","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/confirm.1b6082f8.svg\";","import React from 'react';\nimport failIcon from '../images/icons/fail.svg';\nimport successIcon from '../images/icons/confirm.svg';\n\nfunction InfoTooltip(props) {\n  const { onClose, isOpen } = props\n  const successText = 'Success! You have now been registered.';\n  const failText = 'Oops, something went wrong! Please try again.';\n\n  return (\n    <div className={`popup popup_type_confirm ${isOpen && 'popup_visible'}`}>\n      <div className=\"popup__container\">\n        <div className='popup__form'>\n          <button aria-label=\"exit\" type=\"button\" className=\"popup__exit-button popup__exit-image\" onClick={onClose} />\n          <img className='popup__icon' alt='confirm-icon' src={props.message ? successIcon : failIcon} />\n          <p className='popup__icon-text'>{props.message ? successText : failText}</p>\n        </div>\n      </div>\n    </div >\n  )\n}\n\nexport default InfoTooltip;\n","\nexport const BASE_URL = \"https://api.saappir.students.nomoreparties.sbs\";\n\nexport const resHandler = (res) => res.ok ? res.json() : Promise.reject(res.statusText);\n\nexport const register = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => resHandler(res))\n};\n\nexport const login = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => resHandler(res))\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        return data;\n      }\n      else {\n        return;\n      }\n    })\n}\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  })\n    .then(res => resHandler(res))\n    .then((data) => data)\n}\n","import React, { useState } from \"react\";\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport '../index.css';\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport api from \"../utils/api.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport * as auth from '../utils/auth';\n\nfunction App() {\n\n  const [selectedCard, setSelectedCard] = useState({});\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n\n  const [currentUser, setUserState] = useState({});\n  const [cards, setCardsArray] = useState([]);\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [email, setEmail] = useState('');\n  const [message, setMessage] = useState('');\n  const history = useHistory();\n\n  React.useEffect(() => {\n    api.getUserinfo()\n      .then(setUserState)\n      .catch(error => console.error('user info error', error));\n  }, []);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then(setCardsArray)\n      .catch(error => console.error('initial cards error', error));\n  }, []);\n\n  React.useEffect(() => {\n    tokenCheck();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [history]);\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleCardClick = (selectedCard) => {\n    setSelectedCard(selectedCard);\n    setIsImagePopupOpen(true);\n  };\n\n  const handleUpdateUser = (data) => {\n    api.updateUserInfo(data)\n      .then(setUserState)\n      .then(closeAllPopups)\n      .catch(error => console.error('update user error', error))\n  }\n\n  const handleUpdateAvatar = (data) => {\n    api.setUserAvatar(data)\n      .then(setUserState)\n      .then(closeAllPopups)\n      .catch(error => console.error('update avatar error', error))\n  }\n\n  const handleAddPlace = (data) => {\n    api.createCard(data)\n      .then((newCard) => {\n        setCardsArray([newCard, ...cards])\n      })\n      .then(closeAllPopups)\n      .catch(error => console.error('add place error', error))\n  }\n\n  const handleRegister = ({ email, password }) => {\n    auth.register({ email, password })\n      .then(() => {\n        setMessage(true)\n      })\n      .catch((error) => {\n        setMessage(false)\n        if (error === 'Bad Request') {\n          console.error('400 - one of the fields was filled in incorrectly', error)\n        } else {\n          console.error('500 - an error occured', error)\n        }\n      })\n      .finally(() => {\n        setIsInfoTooltipOpen(true)\n        history.push('/')\n      })\n  }\n\n  const handleLogin = ({ email, password }) => {\n    auth.login({ email, password })\n      .then((res) => {\n        if (res.token) {\n          setLoggedIn(true)\n          setEmail(res.email)\n        } else {\n          setLoggedIn(false)\n        }\n        tokenCheck();\n      })\n      .catch((error) => {\n        setMessage(false)\n        setIsInfoTooltipOpen(true)\n        if (error === 'Bad Request') {\n          console.error('400 - one or more of the fields were not provided', error)\n        } else if (error === 'Unauthorized') {\n          console.error('401 - the user with the specified email not found', error)\n        } else {\n          console.error('500 - an error occured', error)\n        }\n      })\n      .finally(() => history.push('/'))\n  }\n\n  const tokenCheck = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setEmail(res.data.email)\n            setLoggedIn(true)\n            history.push('/');\n          }\n        })\n        .catch((error) => {\n          if (error === 'Bad Request') {\n            console.error('400 - Token not provided or provided in the wrong format', error)\n          } else if (error === 'Unauthorized') {\n            console.error('401 - The provided token is invalid', error)\n          } else {\n            console.error('500 - an error occured', error)\n          }\n        })\n    }\n  }\n\n  const handleLogout = () => {\n    setEmail('')\n    setLoggedIn(false);\n    history.push('/');\n    localStorage.removeItem('token')\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCardsArray((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(error => console.error('like card error', error))\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCardsArray(cards.filter(((c) => c._id !== card._id)))\n      })\n      .catch(error => console.error('delete card error', error))\n  }\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n\n        <Switch>\n          <Route path='/signup'>\n            <Header loggedIn={loggedIn} linkPath='/signin' linkTitle='Log in' />\n            <Register onRegister={handleRegister} />\n            <InfoTooltip loggedIn={loggedIn} onClose={closeAllPopups} isOpen={isInfoTooltipOpen} message={message} />\n\n          </Route>\n          <Route path='/signin'>\n            <Header loggedIn={loggedIn} linkPath='/signup' linkTitle='Sign up' />\n            <Login onLogin={handleLogin} />\n            <InfoTooltip loggedIn={loggedIn} onClose={closeAllPopups} isOpen={isInfoTooltipOpen} message={message} />\n\n          </Route>\n          <ProtectedRoute loggedIn={loggedIn} exact path='/' >\n            <Header loggedIn={loggedIn} onLogout={handleLogout} email={email} linkPath='/signup' linkTitle='Log out' />\n            <Main\n              onEditProfileClick={handleEditProfileClick}\n              onAddPlaceClick={handleAddPlaceClick}\n              onEditAvatarClick={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              closeAllPopups={closeAllPopups}\n              handleCardLike={handleCardLike}\n              handleCardDelete={handleCardDelete}\n              cards={cards}\n              currentUser={currentUser}\n            />\n          </ProtectedRoute>\n        </Switch>\n\n        <ProtectedRoute loggedIn={loggedIn}>\n          {loggedIn && <Footer />}\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace} />\n          <PopupWithForm name=\"delete\" title=\"Are you sure?\" submitText=\"Yes\" onClose={closeAllPopups} />\n          <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups} />\n        </ProtectedRoute>\n      </div>\n    </CurrentUserContext.Provider >\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter >\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}